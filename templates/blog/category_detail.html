{% extends 'blog/base.html' %}

{% block title %}{{ category.name }} - –ë–ª–æ–≥ –ø—Ä–æ –º–∞—à–∏–Ω—ã{% endblock %}

{% block content %}
<h1 style="text-align: center; margin-bottom: 1rem; color: #667eea;">{{ category.name }}</h1>

{% if category.description %}
<div style="text-align: center; margin-bottom: 2rem; padding: 1rem; background: #f8f9fa; border-radius: 10px; color: #666;">
    {{ category.description }}
</div>
{% endif %}

{% if categories %}
<div class="categories">
    <a href="{% url 'blog:post_list' %}" class="category-link">–í—Å–µ</a>
    {% for cat in categories %}
    <a href="{% url 'blog:category_detail' cat.slug %}" class="category-link {% if cat.slug == category.slug %}active{% endif %}">
        {{ cat.name }}
    </a>
    {% endfor %}
</div>
{% endif %}

{% if page_obj %}
<div class="posts-grid">
    {% for post in page_obj %}
    <article class="post-card">
        {% if post.image %}
        <img src="{{ post.image.url }}" alt="{{ post.title }}" class="post-image">
        {% else %}
        <div class="post-image"></div>
        {% endif %}
        <div class="post-content">
            <h2 class="post-title">
                <a href="{% url 'blog:post_detail' post.slug %}">{{ post.title }}</a>
            </h2>
            <div class="post-meta">
                <span>üìÖ {{ post.created_at|date:"d.m.Y" }}</span>
                <span> | üëÅÔ∏è {{ post.views }}</span>
            </div>
            {% if post.excerpt %}
            <p class="post-excerpt">{{ post.excerpt|truncatewords:20 }}</p>
            {% endif %}
            <a href="{% url 'blog:post_detail' post.slug %}" class="read-more">–ß–∏—Ç–∞—Ç—å –¥–∞–ª–µ–µ ‚Üí</a>
        </div>
    </article>
    {% endfor %}
</div>

{% if page_obj.has_other_pages %}
<div class="pagination">
    {% if page_obj.has_previous %}
    <a href="?page=1">¬´ –ü–µ—Ä–≤–∞—è</a>
    <a href="?page={{ page_obj.previous_page_number }}">‚Äπ –ü—Ä–µ–¥—ã–¥—É—â–∞—è</a>
    {% endif %}
    
    <span class="current">
        –°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ page_obj.number }} –∏–∑ {{ page_obj.paginator.num_pages }}
    </span>
    
    {% if page_obj.has_next %}
    <a href="?page={{ page_obj.next_page_number }}">–°–ª–µ–¥—É—é—â–∞—è ‚Ä∫</a>
    <a href="?page={{ page_obj.paginator.num_pages }}">–ü–æ—Å–ª–µ–¥–Ω—è—è ¬ª</a>
    {% endif %}
</div>
{% endif %}

{% else %}
<div style="text-align: center; padding: 3rem;">
    <h2>–í —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–∫–∞ –Ω–µ—Ç –ø–æ—Å—Ç–æ–≤</h2>
</div>
{% endif %}
{% endblock %}

